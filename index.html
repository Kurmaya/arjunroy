
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./styles.css">
    <title>Arjun Roy Project</title>
  </head>
  <body>
    <div class="time-cont">
    <h2 class="limit"> Enter time limit:</h2> <span id="time">0:00</span>
    </div>

    <input type="text" id="myInput" class="#capture" autocomplete="off">
    <button>Begin</button>
    <h1>Number of Backspace/Delete: <span class="backs">0</span></h1>
    <audio id="buzz" style="display:none">
      <source src="./audio/buzz.mp3" type="audio/mp3"> Your browser does not support the audio element.
    </audio>
    <audio id="over" style="display:none">
  <source src="./audio/time.mp3" type="audio/mp3"> Your browser does not support the audio element.
</audio>

    <script src="html2canvas.min.js" charset="utf-8"></script>
    <script>
    var t;
    let m = document.getElementById('time').innerText;
    window.addEventListener('load',function(){
    t=  prompt('enter Time Limit:');
    if(t>0){
      document.getElementById('time').innerText= t;
      document.querySelector('.limit').innerText='Time Limit';
    }
  });



  const butt= document.querySelector('button');
  const buzz= document.getElementById('buzz');
  const over =document.getElementById('over');
  butt.addEventListener('click',begin);
  document.getElementById('myInput').disabled=true;
  function begin(){
    document.getElementById('myInput').select();
    butt.classList.add('active');
    document.querySelector('.limit').innerText='Remaining Time :';
    document.getElementById('myInput').disabled=false;

  function timer(){
    {
      if(t<=0){
       document.body.style.backgroundColor='rgba(255,0,0,1)';
       document.getElementById('myInput').disabled=true;
//        html2canvas(document.getElementById("myInput")).then(canvas => {
//     document.body.appendChild(canvas);
// });

     }

     else if(t>0){
        t=t-1;
        document.getElementById('time').innerText =t;
      }

    }
  }
  setInterval(timer
    ,1000);

  }

  var count=0;
      document.querySelector('input').onkeydown = function (event) {

        if (event.which == 8 || event.which == 46) {

           event.preventDefault();
           buzz.play();  // turn off browser transition to the previous page
           document.body.classList.add('active');
           setTimeout(function(){
             document.body.classList.remove('active');
           },100)
    count++;
    document.querySelector('.backs').textContent=count;
           // alert(event.code);
         }
        };
        document.querySelector('input').addEventListener('select', function() {
          // this.addEventListener("mousedown", function(event){
          //   event.preventDefault();
          // });
  this.selectionStart = this.selectionEnd;
}, false);

       </script>

  </body>
</html>
